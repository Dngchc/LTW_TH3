{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { fetchModel } from \"../../lib/fetchModelData\";\nconst UserPhotos = ({\n  userId,\n  isLoggedIn\n}) => {\n  _s();\n  const [photos, setPhotos] = useState([]);\n  const [commentText, setCommentText] = useState(\"\");\n  const [selectedPhotoId, setSelectedPhotoId] = useState(null);\n  useEffect(() => {\n    fetchModel(`/photos/photosOfUser/${userId}`).then(data => setPhotos(data || []));\n  }, [userId]);\n  const handleImageError = e => {\n    e.target.src = \"https://via.placeholder.com/200\";\n  };\n  const handleCommentSubmit = photoId => {\n    if (!isLoggedIn) {\n      alert(\"Vui lòng đăng nhập để bình luận.\");\n      return;\n    }\n    // Logic giả lập gửi bình luận (chưa có API backend)\n    console.log(`Gửi bình luận \"${commentText}\" cho ảnh ${photoId}`);\n    setCommentText(\"\");\n    setSelectedPhotoId(null);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", null, \"Ảnh của người dùng\"), photos.length === 0 ? /*#__PURE__*/React.createElement(\"p\", null, \"Không có ảnh nào.\") : photos.map(photo => /*#__PURE__*/React.createElement(\"div\", {\n    key: photo._id,\n    style: {\n      marginBottom: \"20px\"\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `/images/${photo.file_name}`,\n    alt: \"User photo\",\n    style: {\n      width: \"200px\"\n    },\n    onError: handleImageError\n  }), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"Ngày đăng: \"), new Date(photo.date_time).toLocaleString()), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"Số lượng bình luận: \"), photo.comments.length), !isLoggedIn && photo.comments.length > 0 && /*#__PURE__*/React.createElement(\"ul\", null, photo.comments.map(comment => /*#__PURE__*/React.createElement(\"li\", {\n    key: comment._id\n  }, `${comment.comment} - `, /*#__PURE__*/React.createElement(\"strong\", null, `${comment.user.first_name} ${comment.user.last_name}`), ` (${new Date(comment.date_time).toLocaleString()})`))), isLoggedIn && /*#__PURE__*/React.createElement(\"div\", null, selectedPhotoId === photo._id ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: commentText,\n    onChange: e => setCommentText(e.target.value),\n    placeholder: \"Nhập bình luận...\",\n    style: {\n      padding: \"5px\",\n      marginRight: \"10px\"\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleCommentSubmit(photo._id),\n    style: {\n      padding: \"5px 10px\",\n      backgroundColor: \"#007bff\",\n      color: \"white\",\n      border: \"none\",\n      borderRadius: \"5px\"\n    }\n  }, \"Gửi\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setSelectedPhotoId(null),\n    style: {\n      padding: \"5px 10px\",\n      backgroundColor: \"#dc3545\",\n      color: \"white\",\n      border: \"none\",\n      borderRadius: \"5px\",\n      marginLeft: \"10px\"\n    }\n  }, \"Hủy\")) : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setSelectedPhotoId(photo._id),\n    style: {\n      padding: \"5px 10px\",\n      backgroundColor: \"#28a745\",\n      color: \"white\",\n      border: \"none\",\n      borderRadius: \"5px\"\n    }\n  }, \"Bình luận\")))));\n};\n_s(UserPhotos, \"J3uInA+c9xvULNmIW+5Z4tBEUOQ=\");\n_c = UserPhotos;\nexport default UserPhotos;\nvar _c;\n$RefreshReg$(_c, \"UserPhotos\");","map":{"version":3,"names":["React","useState","useEffect","fetchModel","UserPhotos","userId","isLoggedIn","_s","photos","setPhotos","commentText","setCommentText","selectedPhotoId","setSelectedPhotoId","then","data","handleImageError","e","target","src","handleCommentSubmit","photoId","alert","console","log","createElement","length","map","photo","key","_id","style","marginBottom","file_name","alt","width","onError","Date","date_time","toLocaleString","comments","comment","user","first_name","last_name","type","value","onChange","placeholder","padding","marginRight","onClick","backgroundColor","color","border","borderRadius","marginLeft","_c","$RefreshReg$"],"sources":["I:/CODE/LTW/TH3/photo-sharing-app/frontend/src/components/UserPhotos/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { fetchModel } from \"../../lib/fetchModelData\";\n\nconst UserPhotos = ({ userId, isLoggedIn }) => {\n  const [photos, setPhotos] = useState([]);\n  const [commentText, setCommentText] = useState(\"\");\n  const [selectedPhotoId, setSelectedPhotoId] = useState(null);\n\n  useEffect(() => {\n    fetchModel(`/photos/photosOfUser/${userId}`).then((data) =>\n      setPhotos(data || [])\n    );\n  }, [userId]);\n\n  const handleImageError = (e) => {\n    e.target.src = \"https://via.placeholder.com/200\";\n  };\n\n  const handleCommentSubmit = (photoId) => {\n    if (!isLoggedIn) {\n      alert(\"Vui lòng đăng nhập để bình luận.\");\n      return;\n    }\n    // Logic giả lập gửi bình luận (chưa có API backend)\n    console.log(`Gửi bình luận \"${commentText}\" cho ảnh ${photoId}`);\n    setCommentText(\"\");\n    setSelectedPhotoId(null);\n  };\n\n  return React.createElement(\n    \"div\",\n    null,\n    React.createElement(\"h2\", null, \"Ảnh của người dùng\"),\n    photos.length === 0\n      ? React.createElement(\"p\", null, \"Không có ảnh nào.\")\n      : photos.map((photo) =>\n          React.createElement(\n            \"div\",\n            { key: photo._id, style: { marginBottom: \"20px\" } },\n            React.createElement(\"img\", {\n              src: `/images/${photo.file_name}`,\n              alt: \"User photo\",\n              style: { width: \"200px\" },\n              onError: handleImageError,\n            }),\n            React.createElement(\n              \"p\",\n              null,\n              React.createElement(\"strong\", null, \"Ngày đăng: \"),\n              new Date(photo.date_time).toLocaleString()\n            ),\n            React.createElement(\n              \"p\",\n              null,\n              React.createElement(\"strong\", null, \"Số lượng bình luận: \"),\n              photo.comments.length\n            ),\n            !isLoggedIn &&\n              photo.comments.length > 0 &&\n              React.createElement(\n                \"ul\",\n                null,\n                photo.comments.map((comment) =>\n                  React.createElement(\n                    \"li\",\n                    { key: comment._id },\n                    `${comment.comment} - `,\n                    React.createElement(\n                      \"strong\",\n                      null,\n                      `${comment.user.first_name} ${comment.user.last_name}`\n                    ),\n                    ` (${new Date(comment.date_time).toLocaleString()})`\n                  )\n                )\n              ),\n            isLoggedIn &&\n              React.createElement(\n                \"div\",\n                null,\n                selectedPhotoId === photo._id\n                  ? React.createElement(\n                      \"div\",\n                      null,\n                      React.createElement(\"input\", {\n                        type: \"text\",\n                        value: commentText,\n                        onChange: (e) => setCommentText(e.target.value),\n                        placeholder: \"Nhập bình luận...\",\n                        style: { padding: \"5px\", marginRight: \"10px\" },\n                      }),\n                      React.createElement(\n                        \"button\",\n                        {\n                          onClick: () => handleCommentSubmit(photo._id),\n                          style: {\n                            padding: \"5px 10px\",\n                            backgroundColor: \"#007bff\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"5px\",\n                          },\n                        },\n                        \"Gửi\"\n                      ),\n                      React.createElement(\n                        \"button\",\n                        {\n                          onClick: () => setSelectedPhotoId(null),\n                          style: {\n                            padding: \"5px 10px\",\n                            backgroundColor: \"#dc3545\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"5px\",\n                            marginLeft: \"10px\",\n                          },\n                        },\n                        \"Hủy\"\n                      )\n                    )\n                  : React.createElement(\n                      \"button\",\n                      {\n                        onClick: () => setSelectedPhotoId(photo._id),\n                        style: {\n                          padding: \"5px 10px\",\n                          backgroundColor: \"#28a745\",\n                          color: \"white\",\n                          border: \"none\",\n                          borderRadius: \"5px\",\n                        },\n                      },\n                      \"Bình luận\"\n                    )\n              )\n          )\n        )\n  );\n};\n\nexport default UserPhotos;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}